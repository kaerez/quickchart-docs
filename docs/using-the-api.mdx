---
sidebar_position: 2
---

import ImageWithCaption from './components/ImageWithCaption';

# Using the API

## API parameters

The chart endpoint `https://quickchart.io/chart` accepts these query parameters:

- **`chart`**: Javascript/JSON definition of the chart. Use a Chart.js configuration object. Abbreviated as `c`

:::tip
[URL-encode](https://www.urlencoder.io/) your chart configuration. If not encoded, you may run into problems with special characters or syntax errors in your program. You may also use base64 encoding (see `encoding` option).
:::

- **`width=500`**: Width of the image. Abbreviated as `w`.  Defaults to 500.

- **`height=300`**: Height of the image. Abbreviated as `h`.  Defaults to 300.
- **`devicePixelRatio=2.0`**: Device pixel ratio of the output. Defaults to `2.0` for retina. Image width and height are multiplied by this value. Accepted values: `1` or `2`.
- **`backgroundColor=transparent`**: Background of the chart canvas. Accepts rgb (rgb(255,255,120)), colors (red), and URL-encoded hex values (%23ff00ff). Abbreviated as `bkg`.  Defaults to `transparent`.
- **`version=2.9.4`**: Chart.js version. Setting version to `3` enables latest stable [Chart.js v3](https://www.chartjs.org/docs/latest/configuration/) support. Abbreviated as `v`.  Defaults to latest version of [Chart.js v2](https://www.chartjs.org/docs/2.9.4/charts/line.html).
- **`format=png`** Format of your output. Supported output formats are PNG, WebP, SVG, and PDF. Abbreviated as `f`.  Defaults to `png`.
- **`encoding=url`**: Encoding of your "chart" parameter. Accepted values are `url` and `base64`.  Defaults to `url`.

Combine these parameters in your query string. For example: `/chart?width=500&height=300&format=pdf&c={...}`.

Numerous [client libraries](TODO) are available so you do not need to construct the URL yourself, if you prefer.

## Handling errors

Errors that prevent the chart from rendering will return a non-200 HTTP status code, most commonly `400 Bad Request`. In most cases, the error will be rendered in the requested image format. If an error is rendered in an image, it is also included as a string in the `X-quickchart-error` HTTP header.

<ImageWithCaption src="https://quickchart.io/images/docs/chart_invalid_token.png" caption="An example error due to invalid chart config - not URL encoded."/>

**Invalid or unexpected token**: Invalid Chart.js configurations may return errors similar to this one. The most common cause of this error is that the caller forgot to URL-encode the chart variable. The next most common cause is invalid JSON/Javascript syntax in the chart configuration.

**Cannot read property &lt;X&gt; of undefined** and **&lt;X&gt; is not a function**: Access to certain Chart.js internals, used especially in plugins, is restricted due to potential for abuse. [Contact us](mailto:support@quickchart.io) to get whitelisted for these features.

## Advanced API

### POST endpoint

If your chart is large or complicated, you may prefer to send a POST request rather than a GET request. This avoids limitations on URL length and means you don't have to worry about URL encoding. The /chart POST endpoint returns a chart. It takes the standard [request parameters](TODO) as a JSON object:

```json
{
  "version": "2",
  "backgroundColor": "transparent",
  "width": 500,
  "height": 300,
  "format": "png",
  "chart": {...},
}
```

Note that if you want to include Javascript code in `chart` (e.g. to format labels), you'll have to send the entire `chart` parameter as a string rather than a JSON object. For examples, see documentation on using [JS Functions](TODO).

### Short URLs

You may want to create a shorter URL for your charts, especially if you are sending them via email or SMS. To generate a short URL for your chart, send a POST request to `https://quickchart.io/chart/create` per the above POST spec.

Here's an example using curl. You can use any library that sends an HTTP POST request:

```bash
curl -X POST \
     -H 'Content-Type: application/json' \
     -d '{"chart": {"type": "bar", "data": {"labels": ["Hello", "World"], "datasets": [{"label": "Foo", "data": [1, 2]}]}}}' \
     https://quickchart.io/chart/create
```

Here's an equivalent request using Python:

```python
import json
import requests

quickchart_url = 'https://quickchart.io/chart/create'
post_data = {'chart': {'type': 'bar', 'data': {'labels': ['Hello', 'World'],
             'datasets': [{'label': 'Foo', 'data': [1, 2]}]}}}

response = requests.post(
    quickchart_url,
    json=post_data,
)

if (response.status_code != 200):
    print('Error:', response.text)
else:
    chart_response = json.loads(response.text)
    print(chart_response)
```

You will get a response that looks like this:

```json
{
  "success": true,
  // highlight-next-line
  "url": "https://quickchart.io/chart/render/9a560ba4-ab71-4d1e-89ea-ce4741e9d232"
}
```

Go to the [URL in the response](https://quickchart.io/chart/render/9a560ba4-ab71-4d1e-89ea-ce4741e9d232) to render your chart.

Please note the following limitations:

- It can take a couple seconds for short URLs to become active globally.
- Request inputs are not validated before the URL is created. The chart is only rendered when the URL is visited.
- If your chart includes Javascript, you must supply your chart definition as a string (see [using JS functions](TODO)).
- Saved charts expire after 3 days for free users, 6 months for paid users.

### Templates

If you want to generate many charts, but they only differ slightly, you may prefer to use chart templates. Any chart with a [Short URL](#short-urls) can also be used as a template.

Customize a template by adding URL parameters to the template URL. The following template parameters are supported:

- **`title`** - The title of the chart
- **`labels`** - Comma-separated labels for the label axis of a chart (usually the X axis)
- **`data1, data2, ..., dataN`** - Comma-separated data values for each dataseries

For example, this URL will take template `zf-abc-123` and update its title to "New title":

```
https://quickchart.io/chart/render/zf-abc-123?title=New title
```

We can add a labels URL parameter:

```
https://quickchart.io/chart/render/zf-abc-123?title=New title&labels=Q1,Q2,Q3,Q4
```

Or even override multiple datasets:

```
https://quickchart.io/chart/render/zf-abc-123?data1=40,60,80,100&data2=5,6,7,8
```

In addition to plain numbers, templates also accept (x, y) data values and arbitrary JSON objects.

An example walkthrough with a live template can be viewed [here](TODO).
